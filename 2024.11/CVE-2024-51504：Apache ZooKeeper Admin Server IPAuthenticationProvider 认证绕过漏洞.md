# CVE-2024-51504：Apache ZooKeeper Admin Server IPAuthenticationProvider 认证绕过漏洞

## 0x01   漏洞简述

Apache ZooKeeper 是一个开源的分布式协调服务，它用于维护配置信息、命名、提供分布式同步以及提供组服务。AdminServer 是其中一个特性，提供了 HTTP 接口来供用户通过 API 访问 ZooKeeper 的相关命令。2024 年 11 月，官方披露其在使用 IPAuthenticationProvider 时使用 IP 白名单进行认证的情况下，攻击者可伪造 X-Forwarded-For 头绕过相关验证。

影响范围：

```
3.9.0 <= Apache Zookeeper < 3.9.3
```

安全版本：

```
Apache Zookeeper 3.9.3
```

## 0x02   风险等级

| 评定方式  | 等级  |
| ----- | --- |
| 威胁等级  | 高危  |
| 影响面   | 广泛  |
| 攻击者价值 | 高   |
| 利用难度  | 低   |
| 评分    | 7.0 |

## 0x03   漏洞详情

### 披露时间

2024-11-07

### 参考链接

- https://lists.apache.org/thread/b3qrmpkto5r6989qr61fw9y2x646kqlh
- https://zookeeper.apache.org/

## 0x04   修复建议

### 通用修补建议

官方已发布安全更新，建议升级至最新版本。
