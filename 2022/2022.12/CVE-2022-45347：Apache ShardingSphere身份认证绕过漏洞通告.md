# CVE-2022-45347：Apache ShardingSphere身份认证绕过漏洞通告

报告编号：B6-2022-122701

更新日期：2022-12-27

## 0x01  漏洞简述

2022年12月27日，360CERT监测发现`Apache`官方发布了`ShardingSphere`的风险通告，漏洞编号为`CVE-2022-45347`，漏洞等级：`高危`，漏洞评分：`7.7`。

Apache ShardingSphere 是一套开源的分布式数据库中间件解决方案组成的生态圈，它由 Sharding-JDBC、Sharding-Proxy和Sharding-Sidecar（计划中）这 3 款相互独立，却又能够混合部署配合使用的产品组成。 它们均提供标准化的数据分片、分布式事务和数据库治理功能，可适用于如 Java 同构、异构语言、云原生等各种多样化的应用场景。

## 0x02  风险等级

该漏洞的评定结果如下

| 评定方式    | 等级 |
| ----------- | ---- |
| 威胁等级    | 高危 |
| 影响面      | 广泛 |
| 攻击者价值  | 高   |
| 利用难度    | 低   |
| 360CERT评分 | 7.7  |

## 0x03  漏洞详情

### CVE-2022-45347: Apache ShardingSphere身份认证绕过漏洞

CVE: CVE-2022-45347

组件: ShardingSphere

漏洞类型: 身份验证绕过

影响: 身份验证绕过并执行SQL查询

简述: 该漏洞存在于Apache ShardingSphere-Proxy中，当Apache ShardingSphere-Proxy使用MySQL作为后端数据库，并且在客户端认证失败后并没有完全清理数据库会话，攻击者便可以通过构造一个特殊的MySQL客户端来绕过身份认证并执行查询指令。

## 0x04  影响版本

| 组件                  | 影响版本 | 安全版本 |
| --------------------- | -------- | -------- |
| Apache ShardingSphere | < 5.3.0  | >= 5.3.0 |

## 0x05  修复建议

### 通用修补建议

根据`影响版本`中的信息，排查并升级到`安全版本`。

下载链接：https://github.com/apache/shardingsphere/releases

